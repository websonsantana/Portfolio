<!DOCTYPE html>

<html lang="pt-BR">

<head>

  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Fluxo de Caixa</title>

  <style>

    body {

      margin: 200;

      font-family: Arial, sans-serif;

      background-color: #777;

    }

    #menu {

      width: 250px;

      height: 100vh;

      background-color: #ccc;

      position: fixed;

      top: 30px;

      left: -250px;

      transition: all 0.3s ease;

    }

    #menu.active {

      left: 0;

    }

    #logo {

      text-align: center;

      padding: 20px;

      color: white;

    }

    #cliente {

      background-color: #333;

      padding: 10px 20px;

      display: flex;

      justify-content: space-between;

      color: white;

    }

    #filtro {

      padding: 10px 100px;

      display: flex;

      justify-content: space-between;

      color: white;

    }

    #fluxo-caixa {

      padding: 20px;

      text-align: center;

    }

    .form-inline {

      display: flex;

      margin-bottom: 10px;

      color: white;

    }

    .form-inline input {

      margin-right: 10px;

    }

    #chart-container {

      width: 80%;

      margin: 20px auto;

      background-color: white;

      padding: 20px;

      border-radius: 10px;

    }

  </style>

  <script src=https://cdn.jsdelivr.net/npm/chart.js></script>

</head>

<body>

  <div id="menu">

    <div id="logo">

      <img src="#" alt="Logo">

    </div>

    <button id="fechar-menu" onclick="fecharMenu()">X</button>

    <ul>

      <li><a href="#">Treinamento</a></li>

      <li><a href="#">Item 2</a></li>

      <li><a href="#">Sobre</a></li>

    </ul>

  </div>

  <br>

  <div id="content">

    <button onclick="toggleMenu()">‚ò∂</button>

    <br>

    <p>

    <br>

    <p>

    <div id="cliente">

      <div>Ol√° Webson</div>

      <div id="saldo">Saldo R$ 0,00</div>

      <button id="toggle-visibility" onclick="toggleSaldoVisibility()">üëÅÔ∏è</button>

    </div>

    <div id="filtro">

      <div class="form-inline">

        <label for="filtroMes"></label>

        <select id="filtroMes" onchange="filtrarMovimentacoes()">

          <option value="jan">Janeiro</option>

          <option value="fev">Fevereiro</option>

          <option value="mar">Mar√ßo</option>

          <option value="abr">Abril</option>

          <option value="mai">Maio</option>

          <option value="jun">Junho</option>

          <option value="jul">Julho</option>

          <option value="ago">Agosto</option>

          <option value="set">Setembro</option>

          <option value="out">Outubro</option>

          <option value="nov">Novembro</option>

          <option value="dez">Dezembro</option>

        </select>

      </div>

      <div class="form-inline">

        <label for="filtroAno"></label>

        <select id="filtroAno" onchange="filtrarMovimentacoes()">

          <option value="2022">2022</option>

          <option value="2023">2023</option>

          <option value="2024">2024</option>

          <option value="2025">2025</option>

        </select>

      </div>

    </div>

    <h3 id="fluxo-caixa">Fluxo de Caixa</h3>

    <div id="entradas">

      <h4>Entradas</h4>

      <div class="form-inline">

        <input id="entradaDescricao" type="text" placeholder="Descri√ß√£o">

        <input id="entradaValor" type="number" placeholder="Valor">

        <button onclick="inserirEntrada()">+</button>

      </div>

      <ul id="listaEntradas"></ul>

    </div>

    <div id="saidas">

      <h4>Sa√≠das</h4>

      <div class="form-inline">

        <input id="saidaDescricao" type="text" placeholder="Descri√ß√£o">

        <input id="saidaValor" type="number" placeholder="Valor">

        <button onclick="inserirSaida()">+</button>

      </div>

      <ul id="listaSaidas"></ul>

    </div>

    <div id="chart-container">

      <canvas id="myChart"></canvas>

    </div>

  </div>

 

  <script>

    let myChart;

 

    // Fun√ß√£o para abrir/fechar o menu

    function toggleMenu() {

      var menu = document.getElementById('menu');

      menu.classList.toggle('active');

    }

 

    // Fun√ß√£o para fechar o menu

    function fecharMenu() {

      var menu = document.getElementById('menu');

      menu.classList.remove('active');

    }

 

    // Fun√ß√£o para obter o m√™s selecionado

    function obterMesSelecionado() {

      return document.getElementById('filtroMes').value;

    }

 

    // Fun√ß√£o para obter o ano selecionado

    function obterAnoSelecionado() {

      return document.getElementById('filtroAno').value;

    }

 

    // Fun√ß√£o para filtrar as movimenta√ß√µes pelo m√™s e ano selecionados

    function filtrarMovimentacoes() {

      exibirEntradas();

      exibirSaidas();

      atualizarSaldo();

      atualizarGrafico();

    }

 

    // Fun√ß√£o para inserir uma entrada

    function inserirEntrada() {

      var descricao = document.getElementById('entradaDescricao').value;

      var valor = document.getElementById('entradaValor').value;

      var mes = obterMesSelecionado();

      var ano = obterAnoSelecionado();

      if (descricao && valor) {

        var entrada = { descricao: descricao, valor: parseFloat(valor), mes: mes, ano: ano };

        var entradas = JSON.parse(localStorage.getItem('entradas')) || [];

        entradas.push(entrada);

        localStorage.setItem('entradas', JSON.stringify(entradas));

        filtrarMovimentacoes();

        // Limpar os campos

        document.getElementById('entradaDescricao').value = '';

        document.getElementById('entradaValor').value = '';

      } else {

        alert('Por favor, preencha todos os campos.');

      }

    }

 

    // Fun√ß√£o para inserir uma sa√≠da

    function inserirSaida() {

      var descricao = document.getElementById('saidaDescricao').value;

      var valor = document.getElementById('saidaValor').value;

      var mes = obterMesSelecionado();

      var ano = obterAnoSelecionado();

      if (descricao && valor) {

        var saida = { descricao: descricao, valor: parseFloat(valor), mes: mes, ano: ano };

        var saidas = JSON.parse(localStorage.getItem('saidas')) || [];

        saidas.push(saida);

        localStorage.setItem('saidas', JSON.stringify(saidas));

        filtrarMovimentacoes();

        // Limpar os campos

        document.getElementById('saidaDescricao').value = '';

        document.getElementById('saidaValor').value = '';

      } else {

        alert('Por favor, preencha todos os campos.');

      }

    }

 

    // Fun√ß√£o para remover uma entrada

    function removerEntrada(index) {

      var entradas = JSON.parse(localStorage.getItem('entradas')) || [];

      entradas.splice(index, 1);

      localStorage.setItem('entradas', JSON.stringify(entradas));

      filtrarMovimentacoes();

    }

 

    // Fun√ß√£o para remover uma sa√≠da

    function removerSaida(index) {

      var saidas = JSON.parse(localStorage.getItem('saidas')) || [];

      saidas.splice(index, 1);

      localStorage.setItem('saidas', JSON.stringify(saidas));

      filtrarMovimentacoes();

    }

 

    // Fun√ß√£o para exibir as entradas correspondentes ao m√™s e ano selecionados

    function exibirEntradas() {

      var mes = obterMesSelecionado();

      var ano = obterAnoSelecionado();

      var entradas = JSON.parse(localStorage.getItem('entradas')) || [];

      var listaEntradas = document.getElementById('listaEntradas');

      listaEntradas.innerHTML = '';

      entradas.forEach(function(entrada, index) {

        if (entrada.mes === mes && entrada.ano === ano) {

          var li = document.createElement('li');

          li.textContent = entrada.descricao + ': R$ ' + entrada.valor.toFixed(2);

          var botao = document.createElement('button');

          botao.textContent = 'Remover';

          botao.onclick = function() {

            removerEntrada(index);

          };

          li.appendChild(botao);

          listaEntradas.appendChild(li);

        }

      });

    }

 

    // Fun√ß√£o para exibir as sa√≠das correspondentes ao m√™s e ano selecionados

    function exibirSaidas() {

      var mes = obterMesSelecionado();

      var ano = obterAnoSelecionado();

      var saidas = JSON.parse(localStorage.getItem('saidas')) || [];

      var listaSaidas = document.getElementById('listaSaidas');

      listaSaidas.innerHTML = '';

      saidas.forEach(function(saida, index) {

        if (saida.mes === mes && saida.ano === ano) {

          var li = document.createElement('li');

          li.textContent = saida.descricao + ': R$ ' + saida.valor.toFixed(2);

          var botao = document.createElement('button');

          botao.textContent = 'Remover';

          botao.onclick = function() {

            removerSaida(index);

          };

          li.appendChild(botao);

          listaSaidas.appendChild(li);

        }

      });

    }

 

    // Fun√ß√£o para calcular e atualizar o saldo

    function atualizarSaldo() {

      var mes = obterMesSelecionado();

      var ano = obterAnoSelecionado();

      var entradas = JSON.parse(localStorage.getItem('entradas')) || [];

      var saidas = JSON.parse(localStorage.getItem('saidas')) || [];

      var saldo = 0;

      entradas.forEach(function(entrada) {

        if (entrada.mes === mes && entrada.ano === ano) {

          saldo += entrada.valor;

        }

      });

      saidas.forEach(function(saida) {

        if (saida.mes === mes && saida.ano === ano) {

          saldo -= saida.valor;

        }

      });

      document.getElementById('saldo').textContent = 'Saldo R$ ' + saldo.toFixed(2);

    }

 

    // Fun√ß√£o para alternar a visibilidade do saldo

    function toggleSaldoVisibility() {

      var saldoElement = document.getElementById('saldo');

      var button = document.getElementById('toggle-visibility');

      if (saldoElement.style.visibility === 'hidden') {

        saldoElement.style.visibility = 'visible';

        button.textContent = 'üëÅÔ∏è';

      } else {

        saldoElement.style.visibility = 'hidden';

        button.textContent = 'üôà';

      }

    }

 

    // Fun√ß√£o para atualizar o gr√°fico de barras

    function atualizarGrafico() {

      var ano = obterAnoSelecionado();

      var entradas = JSON.parse(localStorage.getItem('entradas')) || [];

      var saidas = JSON.parse(localStorage.getItem('saidas')) || [];

 

      var meses = ['Janeiro', 'Fevereiro', 'Mar√ßo', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];

      var entradasMensais = Array(12).fill(0);

      var saidasMensais = Array(12).fill(0);

 

      entradas.forEach(function(entrada) {

        if (entrada.ano === ano) {

          var mesIndex = meses.indexOf(entrada.mes);

          if (mesIndex !== -1) {

            entradasMensais[mesIndex] += entrada.valor;

          }

        }

      });

 

      saidas.forEach(function(saida) {

        if (saida.ano === ano) {

          var mesIndex = meses.indexOf(saida.mes);

          if (mesIndex !== -1) {

            saidasMensais[mesIndex] += saida.valor;

          }

        }

      });

 

      var ctx = document.getElementById('myChart').getContext('2d');

      if (myChart) {

        myChart.destroy();

      }

 

      myChart = new Chart(ctx, {

        type: 'bar',

        data: {

          labels: meses,

          datasets: [

            {

              label: 'Entradas',

              data: entradasMensais,

              backgroundColor: 'rgba(75, 192, 192, 0.6)',

              borderColor: 'rgba(75, 192, 192, 1)',

              borderWidth: 1

            },

            {

              label: 'Sa√≠das',

              data: saidasMensais,

              backgroundColor: 'rgba(255, 99, 132, 0.6)',

              borderColor: 'rgba(255, 99, 132, 1)',

              borderWidth: 1

            }

          ]

        },

        options: {

          scales: {

            y: {

              beginAtZero: true

            }

          }

        }

      });

    }

 

    // Inicializar a p√°gina

    function inicializarPagina() {

      filtrarMovimentacoes();

    }

 

    inicializarPagina();

  </script>

</body>

</html>
